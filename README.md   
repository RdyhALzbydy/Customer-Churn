# ๐ต Radiya - Customer Churn Prediction System

<div align="center">

![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![Machine Learning](https://img.shields.io/badge/ML-Scikit--Learn-orange.svg)
![API](https://img.shields.io/badge/API-FastAPI-009688.svg)
![Docker](https://img.shields.io/badge/Docker-Ready-2496ED.svg)

**ูุธุงู ุดุงูู ููุชูุจุค ุจุงูุณุญุงุจ ุงูุนููุงุก ูู ููุตุงุช ุงูุจุซ ุงูููุณููู**

[English](#english) | [ุงูุนุฑุจูุฉ](#arabic)

</div>

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

- [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
- [ุงููุฒุงูุง ุงูุฑุฆูุณูุฉ](#ุงููุฒุงูุง-ุงูุฑุฆูุณูุฉ)
- [ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ](#ุงูุชูููุงุช-ุงููุณุชุฎุฏูุฉ)
- [ุงูุชุซุจูุช ุงูุณุฑูุน](#ุงูุชุซุจูุช-ุงูุณุฑูุน)
- [ุงูุงุณุชุฎุฏุงู](#ุงูุงุณุชุฎุฏุงู)
- [ุงููุชุงุฆุฌ ูุงูุฏูุฉ](#ุงููุชุงุฆุฌ-ูุงูุฏูุฉ)
- [API Documentation](#api-documentation)
- [ุงููุดุฑ](#ุงููุดุฑ)
- [ุงููุณุงููุฉ](#ุงููุณุงููุฉ)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ {#ูุธุฑุฉ-ุนุงูุฉ}

**Radiya** ูู ูุธุงู ุฐูู ูุชูุงูู ููุชูุจุค ุจุงูุณุญุงุจ ุงูุนููุงุก ูู ููุตุงุช ุงูุจุซ ุงูููุณููู. ูุณุชุฎุฏู ุชูููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุชูุฏูุฉ ูุชุญููู ุณููู ุงููุณุชุฎุฏููู ูุงูุชูุจุค ุจูู ูู ุงูุฃูุซุฑ ุนุฑุถุฉ ูุฅูุบุงุก ุงุดุชุฑุงููู.

### ๐ช ููุงุฐุง Radiyaุ

- **ุฏูุฉ ุนุงููุฉ**: ูุญูู ุฏูุฉ ุชุตู ุฅูู 88% ูู ุงูุชูุจุค
- **ุดุงูู**: ูู ุงูุชุญููู ุฅูู ุงููุดุฑ ูู ูุธุงู ูุงุญุฏ
- **ูุงุจู ููุชูุณุน**: ูุตูู ููุนูู ูุน ุงูุจูุงูุงุช ุงููุจูุฑุฉ
- **ุณูู ุงูุงุณุชุฎุฏุงู**: ูุงุฌูุฉ API ุจุณูุทุฉ ููุซุงุฆู ุดุงููุฉ

## โจ ุงููุฒุงูุง ุงูุฑุฆูุณูุฉ {#ุงููุฒุงูุง-ุงูุฑุฆูุณูุฉ}

### ๐ค ููุงุฐุฌ ูุชูุฏูุฉ
- **6 ุฎูุงุฑุฒููุงุช ูุฎุชููุฉ**: Random Forest, XGBoost, LightGBM, Logistic Regression, SVM, Gradient Boosting
- **ูุนุงูุฌุฉ ุนุฏู ุงูุชูุงุฒู**: ุชูููุงุช SMOTE ู ADASYN
- **4 ุทุฑู ุชุนุฑูู ุงูุงูุณุญุงุจ**: ุฅูุบุงุกุ ุชุฎููุถุ ูุฏูุฌุ ุนุฏู ูุดุงุท

### ๐ ููุฏุณุฉ ููุฒุงุช ูุชูุฏูุฉ
- **60+ ููุฒุฉ ูููุฏุณุฉ**: ุชุบุทู ุฌููุน ุฌูุงูุจ ุณููู ุงููุณุชุฎุฏู
- **ููุฒุงุช ุฒูููุฉ**: ุฃููุงุท ุงูุงุณุชุฎุฏุงู ูุงูุงุชุฌุงูุงุช
- **ููุฒุงุช ุชูุงุนููุฉ**: ุงูุฅุนุฌุงุจุ ุงูููุงุฆูุ ุงูุฃุตุฏูุงุก
- **ููุฒุงุช ุฏูููุบุฑุงููุฉ**: ุงูุฌูุณุ ุงููููุนุ ููุน ุงูุงุดุชุฑุงู

### ๐ ูุธุงู ูุชูุงูู
- **ุชุญููู ุดุงูู**: ูู ุงูุจูุงูุงุช ุงูุฎุงู ุฅูู ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ
- **API ุณุฑูุน**: FastAPI ูุน ูุซุงุฆู ุชูุงุนููุฉ
- **ูุฑุงูุจุฉ ุฐููุฉ**: ุงูุชุดุงู ุงูุญุฑุงู ุงูุจูุงูุงุช
- **ูุดุฑ ุณูู**: Docker ู Docker Compose

## ๐ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ {#ุงูุชูููุงุช-ุงููุณุชุฎุฏูุฉ}

<table>
<tr>
<td><strong>ุงููุฌุงู</strong></td>
<td><strong>ุงูุชูููุฉ</strong></td>
<td><strong>ุงูุบุฑุถ</strong></td>
</tr>
<tr>
<td>Machine Learning</td>
<td>scikit-learn, XGBoost, LightGBM</td>
<td>ุฎูุงุฑุฒููุงุช ุงูุชุนูู ุงูุขูู</td>
</tr>
<tr>
<td>Data Processing</td>
<td>pandas, numpy</td>
<td>ูุนุงูุฌุฉ ูุชุญููู ุงูุจูุงูุงุช</td>
</tr>
<tr>
<td>Data Balancing</td>
<td>imbalanced-learn</td>
<td>ูุนุงูุฌุฉ ุนุฏู ุชูุงุฒู ุงูุจูุงูุงุช</td>
</tr>
<tr>
<td>API Framework</td>
<td>FastAPI, Uvicorn</td>
<td>ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช</td>
</tr>
<tr>
<td>Visualization</td>
<td>plotly, seaborn, matplotlib</td>
<td>ุงูุฑุณูู ุงูุจูุงููุฉ ุงูุชูุงุนููุฉ</td>
</tr>
<tr>
<td>Model Management</td>
<td>MLflow</td>
<td>ุชุชุจุน ุงูููุงุฐุฌ ูุงูุชุฌุงุฑุจ</td>
</tr>
<tr>
<td>Containerization</td>
<td>Docker, Docker Compose</td>
<td>ุงููุดุฑ ูุงูุญุงููุงุช</td>
</tr>
<tr>
<td>Code Quality</td>
<td>Black, Ruff</td>
<td>ุฌูุฏุฉ ููุธุงูุฉ ุงูููุฏ</td>
</tr>
</table>

## ๐ ุงูุชุซุจูุช ุงูุณุฑูุน {#ุงูุชุซุจูุช-ุงูุณุฑูุน}

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ
- Python 3.9+
- Git
- Docker (ุงุฎุชูุงุฑู ูููุดุฑ)

### ุงูุชุซุจูุช ุงููุญูู

```bash
# 1. ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone https://github.com/your-username/radiya.git
cd radiya

# 2. ุฅูุดุงุก ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ุฃู
venv\Scripts\activate     # Windows

# 3. ุชุซุจูุช ุงููุชุทูุจุงุช
pip install -r requirements.txt

# 4. ูุถุน ุงูุจูุงูุงุช
# ุถุน ููู customer_churn_mini.json ูู:
# data/raw/customer_churn_mini.json

# 5. ุงูุชุดุบูู ุงูุณุฑูุน
python run_radiya.py
```

### ุงููุดุฑ ุจู Docker

```bash
# ุจูุงุก ูุชุดุบูู ุงููุธุงู
docker-compose up --build

# ุงูุฎุฏูุงุช ุงููุชุงุญุฉ:
# - API: http://localhost:8000
# - MLflow: http://localhost:5000
# - ูุซุงุฆู API: http://localhost:8000/docs
```

## ๐ ุงูุงุณุชุฎุฏุงู {#ุงูุงุณุชุฎุฏุงู}

### 1. ุงูุชุญููู ูุงูุชุฏุฑูุจ ุงููุงูู

```bash
# ุชุดุบูู ุงูุชุญููู ุงููุงูู
python run_radiya.py

# ุงููุชุงุฆุฌ ุณุชููู ูู:
# - models/saved_models/     # ุงูููุงุฐุฌ ุงููุฏุฑุจุฉ
# - reports/metrics/         # ุชูุงุฑูุฑ ุงููุชุงุฆุฌ
# - logs/                    # ูููุงุช ุงูุณุฌู
```

### 2. ุชุดุบูู API

```bash
# ุชุดุบูู ุฎุฏูุฉ API
uvicorn src.radiya.api.main:app --host 0.0.0.0 --port 8000
uvicorn src.radiya.api.main:app --reload --host 0.0.0.0 --port 8000

# ุฃู ุงุณุชุฎุฏู Docker
docker-compose up radiya-api
```

### 3. ุงุณุชุฎุฏุงู API

```python
import requests

# ุงูุชูุจุค ููุณุชุฎุฏู ูุงุญุฏ
user_data = {
    "userId": "user123",
    "total_events": 150,
    "songs_played": 100,
    "thumbs_up": 10,
    "final_level_paid": 1,
    # ... ุจุงูู ุงูููุฒุงุช
}

response = requests.post("http://localhost:8000/predict", json=user_data)
result = response.json()

print(f"ุงุญุชูุงููุฉ ุงูุงูุณุญุงุจ: {result['churn_probability']:.2f}")
print(f"ูุณุชูู ุงููุฎุงุทุฑุฉ: {result['risk_level']}")
```

### 4. ุงุณุชุฎุฏุงู ุงูููุงุฐุฌ ุงููุญููุธุฉ

```python
import joblib
import pandas as pd

# ุชุญููู ุงููููุฐุฌ
model = joblib.load('models/saved_models/best_model_XGBoost_*.joblib')

# ุงูุชูุจุค
features = pd.DataFrame([user_features])
probability = model.predict_proba(features)[0][1]
```

## ๐ ุงููุชุงุฆุฌ ูุงูุฏูุฉ {#ุงููุชุงุฆุฌ-ูุงูุฏูุฉ}

### ุฃุฏุงุก ุงูููุงุฐุฌ ุงููุชููุน

| ุงููููุฐุฌ | AUC Score | Precision | Recall | F1-Score | ุงููุตู |
|---------|-----------|-----------|--------|----------|---------|
| **XGBoost** | 0.84-0.88 | 0.72-0.78 | 0.68-0.75 | 0.70-0.76 | ุงูุฃูุถู ุนุงุฏุฉ |
| **LightGBM** | 0.82-0.87 | 0.70-0.76 | 0.66-0.73 | 0.68-0.74 | ุณุฑูุน ููุนุงู |
| **Random Forest** | 0.79-0.85 | 0.68-0.74 | 0.64-0.71 | 0.66-0.72 | ูุณุชูุฑ ูููุณุฑ |
| **Logistic Regression** | 0.75-0.82 | 0.65-0.71 | 0.60-0.68 | 0.62-0.69 | ุจุณูุท ูุณุฑูุน |

### ููุงููุณ ุงูุฃุนูุงู

- **ุชูููู ูุนุฏู ุงูุงูุณุญุงุจ**: ุญุชู 15%
- **ROI ููุญููุงุช ุงููุณุชูุฏูุฉ**: 3-5x
- **ุฏูุฉ ุงูุชูุจุคุงุช**: 80-88%
- **ุฎูุถ ุงูุชูุงููู**: 20-30%

## ๐ API Documentation {#api-documentation}

### ุงููุณุงุฑุงุช ุงูุฃุณุงุณูุฉ

#### ุงูุชูุจุค ุงููุฑุฏู
```bash
POST /predict
Content-Type: application/json

{
  "userId": "user123",
  "total_events": 150,
  "songs_played": 100,
  "thumbs_up": 10,
  "final_level_paid": 1,
  "interaction_rate": 0.17
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "userId": "user123",
  "churn_probability": 0.23,
  "risk_level": "Low",
  "confidence": "High",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

#### ุงูุชูุจุค ุงููุฌูุน
```bash
POST /predict/batch
Content-Type: application/json

{
  "users": [
    { "userId": "user1", "total_events": 150, ... },
    { "userId": "user2", "total_events": 75, ... }
  ]
}
```

#### ุงููุซุงุฆู ุงูุชูุงุนููุฉ
ุฒุฑ `http://localhost:8000/docs` ูููุซุงุฆู ุงูุชูุงุนููุฉ ุงููุงููุฉ.

## ๐ณ ุงููุดุฑ {#ุงููุดุฑ}

### ุงููุดุฑ ุงููุญูู

```bash
# ุชุดุบูู ุณุฑูุน
python run_radiya.py

# ุชุดุบูู API
uvicorn src.radiya.api.main:app --reload
```

### ุงููุดุฑ ุจู Docker

```bash
# ุจูุงุก ุงูุตูุฑุฉ
docker build -t radiya:latest .

# ุชุดุบูู ุฌููุน ุงูุฎุฏูุงุช
podman-compose down
podman-compose up -d



podman-compose logs -f radiya-api

mkdir -p ./mlflow-data
chmod -R 777 ./mlflow-data


sudo apt install -y policycoreutils


sudo restorecon -R -v ./mlflow_data ./mlruns ./data ./models ./logs ./reports
sudo chcon -R -t container_file_t ./mlflow_data ./mlruns ./data ./models ./logs ./reports


podman-compose up -d


podman ps -a
podman inspect radiya_mlflow
podman-compose logs -f mlflow


podman ps -a
podman logs radiya_nginx
podman logs radiya_training
podman-compose logs -f mlflow
ls -l ./mlflow_data/mlflow.db



podman-compose logs -f mlflow



# ุงูุฎุฏูุงุช ุงููุชุงุญุฉ:
# - radiya-api: ุงููููุฐ 8000
# - mlflow: ุงููููุฐ 5000
```

### ุงููุดุฑ ุนูู ุงูุฅูุชุงุฌ

```bash
# ููุฅูุชุงุฌ ูุน Gunicorn
docker-compose -f docker-compose.prod.yml up -d

# ูุน ููุงุนุฏ ุจูุงูุงุช ุฎุงุฑุฌูุฉ
export DATABASE_URL="postgresql://user:pass@host:5432/radiya"
docker-compose up -d
```

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ

```bash
# .env
PROJECT_NAME=radiya
DATA_PATH=data/raw/customer_churn_mini.json
MODEL_SAVE_PATH=models/saved_models/
MLFLOW_TRACKING_URI=sqlite:///mlflow.db
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO
```

## ๐ ูููู ุงููุดุฑูุน

```
radiya/
โโโ ๐ data/
โ   โโโ raw/customer_churn_mini.json     # ุงูุจูุงูุงุช ุงูุฃุตููุฉ
โ   โโโ processed/                       # ุงูุจูุงูุงุช ุงููุนุงูุฌุฉ
โโโ ๐ง src/radiya/
โ   โโโ data/                           # ูุนุงูุฌุฉ ุงูุจูุงูุงุช
โ   โโโ models/                         # ุงูููุงุฐุฌ
โ   โโโ api/                            # ูุงุฌูุฉ API
โ   โโโ utils/                          # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โโโ ๐ณ docker-compose.yml               # ุฅุนุฏุงุฏ Docker
โโโ ๐ requirements.txt                 # ุงููุชุทูุจุงุช
โโโ ๐ run_radiya.py                    # ุงูุชุดุบูู ุงูุฑุฆูุณู
โโโ ๐ models/                          # ุงูููุงุฐุฌ ุงููุญููุธุฉ
โโโ ๐ reports/                         # ุงูุชูุงุฑูุฑ ูุงููุชุงุฆุฌ
โโโ ๐งช tests/                           # ุงูุงุฎุชุจุงุฑุงุช
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

**1. ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช:**
```bash
FileNotFoundError: customer_churn_mini.json
```
**ุงูุญู:** ุถุน ุงูููู ูู `data/raw/customer_churn_mini.json`

**2. ุฎุทุฃ ูู ุงูุงุณุชูุฑุงุฏ:**
```bash
ModuleNotFoundError: No module named 'radiya'
```
**ุงูุญู:** ุชุฃูุฏ ูู ูููุงุช `__init__.py` ูุชุดุบูู `pip install -e .`

**3. ูุดููุฉ ูู ุงููููุฐุฌ:**
```bash
No model loaded
```
**ุงูุญู:** ุดุบู ุงูุชุฏุฑูุจ ุฃููุงู: `python run_radiya.py`

### ูุญุต ุงููุธุงู

```bash
# ุงุฎุชุจุงุฑ ุดุงูู ูููุธุงู
python -c "
import pandas as pd
from pathlib import Path
print('โ pandas ูุนูู')
print(f'๐ ุงูุจูุงูุงุช ููุฌูุฏุฉ: {Path("data/raw/customer_churn_mini.json").exists()}')

try:
    from radiya.data.loader import DataLoader
    print('โ ุงูุงุณุชูุฑุงุฏ ูุนูู')
except:
    print('โ ูุดููุฉ ูู ุงูุงุณุชูุฑุงุฏ')
"
```

## ๐ค ุงููุณุงููุฉ {#ุงููุณุงููุฉ}

ูุฑุญุจ ุจุงููุณุงููุงุช! ุงุชุจุน ูุฐู ุงูุฎุทูุงุช:

1. **Fork** ุงููุดุฑูุน
2. ุฅูุดุงุก ูุฑุน ููููุฒุฉ (`git checkout -b feature/amazing-feature`)
3. ุชุทุจูู ุงูุชุบููุฑุงุช (`git commit -m 'Add amazing feature'`)
4. ุฏูุน ูููุฑุน (`git push origin feature/amazing-feature`)
5. ุฅูุดุงุก **Pull Request**

### ุฅุฑุดุงุฏุงุช ุงูุชุทููุฑ

```bash
# ุชุซุจูุช ุฃุฏูุงุช ุงูุชุทููุฑ
pip install -r requirements-dev.txt

# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
pytest

# ูุญุต ุฌูุฏุฉ ุงูููุฏ
black src/
ruff check src/

# ุชุดุบูู ุฌููุน ุงููุญูุตุงุช
make test lint format
```

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช [ุฑุฎุตุฉ MIT](LICENSE) - ุฑุงุฌุน ุงูููู ููุชูุงุตูู.

## ๐ ุงูุดูุฑ ูุงูุชูุฏูุฑ

- **Sparkify Dataset** - ุจูุงูุงุช ุชุฏุฑูุจูุฉ ููุชุงุฒุฉ
- **Open Source Community** - ููุฃุฏูุงุช ูุงูููุชุจุงุช ุงูุฑุงุฆุนุฉ
- **FastAPI** - ุฅุทุงุฑ ุนูู API ุณุฑูุน ูุญุฏูุซ
- **scikit-learn** - ููุชุจุฉ ุงูุชุนูู ุงูุขูู ุงูุฃุณุงุณูุฉ

## ๐ ุงูุชูุงุตู

- **ุงููุทูุฑ**: Eng. Radiya
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: rdyhalzbydy@gmail.com
- **GitHub**: [github.com/your-username/radiya](https://github.com/RdyhALzbydy/radiya)
- **LinkedIn**: [linkedin.com/in/your-profile](https://linkedin.com/in/your-profile)

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- [ุฏููู ุงููุทูุฑ ุงููุงูู](docs/developer-guide.md)
- [ูุซุงุฆู API ุงูุชูุตูููุฉ](docs/api-detailed.md)
- [ุฃูุซูุฉ ูุชูุฏูุฉ](examples/)
- [ุฏููู ุงูุฅูุชุงุฌ](docs/production-guide.md)

---

<div align="center">

**โญ ุฅุฐุง ุฃุนุฌุจู ุงููุดุฑูุนุ ูุง ุชูุณู ุฅุนุทุงุก ูุฌูุฉ!**

Made with โค๏ธ for the ML Community

</div>

---

# English {#english}

## ๐ต Radiya - Customer Churn Prediction System

A comprehensive machine learning system for predicting customer churn in music streaming platforms.

### ๐ Quick Start

```bash
git clone https://github.com/RdyhALzbydy/radiya.git
cd radiya
pip install -r requirements.txt
python run_radiya.py
```

### ๐ Technologies Used

- **Machine Learning**: scikit-learn, XGBoost, LightGBM
- **Data Processing**: pandas, numpy
- **API**: FastAPI
- **Deployment**: Docker
- **Monitoring**: MLflow

### ๐ Performance

- **AUC Score**: 0.84-0.88
- **Accuracy**: 80-88%
- **Models**: 6 different algorithms
- **Features**: 60+ engineered features

### ๐ Links

- [API Documentation](http://localhost:8000/docs)
- [MLflow Dashboard](http://localhost:5000)
- [GitHub Repository](https://github.com/your-username/radiya)

---

*This project is developed as part of a machine learning portfolio to demonstrate advanced MLOps practices and customer analytics capabilities.*